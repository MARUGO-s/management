# かき氷レシピアーカイブ - 使い方ガイド

このフォルダは、かき氷のレシピを月別に管理するためのアーカイブシステムです。

## 📁 ファイル構成

```
dome/
├── recipes.html          # レシピ一覧ページ（自動生成）
├── generate-recipes.js   # レシピページ自動生成スクリプト
├── 202512.html          # 2025年12月のレシピ
├── 202601.html          # 2026年1月のレシピ
└── README.md            # このファイル
```

## ✨ 特徴

- **完全自動化**: HTMLファイルを追加して、スクリプトを実行するだけ
- **自動検出**: YYYYMM.html 形式のファイルを自動的に検出
- **タイトル抽出**: 各HTMLファイルから自動的にタイトルと説明を抽出
- **日付順ソート**: 新しいレシピが自動的に上位に表示

## 🚀 新しいレシピの追加方法

### ステップ1: HTMLファイルを作成

domeフォルダに `YYYYMM.html` 形式でファイルを作成します。

**例:**
- `202602.html` → 2026年2月のレシピ
- `202603.html` → 2026年3月のレシピ

### ステップ2: スクリプトを実行

ターミナルで以下のコマンドを実行します：

```bash
# domeフォルダ内から実行する場合
node generate-recipes.js

# プロジェクトルートから実行する場合
node dome/generate-recipes.js
```

### ステップ3: 確認

`recipes.html` が自動的に更新されます。ブラウザで開いて確認してください。

```bash
# macOSの場合
open dome/recipes.html

# Windowsの場合
start dome/recipes.html

# Linuxの場合
xdg-open dome/recipes.html
```

## 📋 HTMLファイルの命名規則

- **必須形式**: `YYYYMM.html`
- **例**:
  - ✅ `202601.html` （正しい）
  - ✅ `202512.html` （正しい）
  - ❌ `2026-01.html` （ハイフンは不可）
  - ❌ `january-2026.html` （英語名は不可）
  - ❌ `recipe.html` （日付が必要）

## 🎨 HTMLファイルの推奨構造

スクリプトが適切にタイトルと説明を抽出できるよう、以下の構造を推奨します：

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>レシピのタイトル</title>
</head>
<body>
    <h1>メインタイトル</h1>
    <h2>1. セクション1</h2>
    <h2>2. セクション2</h2>
    <h2>3. セクション3</h2>
    <!-- ... -->
</body>
</html>
```

**抽出されるもの:**
- `<title>` タグ → カードのタイトルとして使用
- 最初の3つの `<h2>` タグ → 説明文として使用

## 🔧 トラブルシューティング

### スクリプトがエラーになる

```bash
# Node.jsがインストールされているか確認
node --version

# v14以上が必要です
```

### レシピが表示されない

1. ファイル名が `YYYYMM.html` 形式か確認
2. スクリプトを実行したか確認
3. ブラウザのキャッシュをクリア

### タイトルが正しく表示されない

HTMLファイルに `<title>` タグまたは `<h1>` タグが含まれているか確認してください。

## 📊 スクリプトの動作

`generate-recipes.js` は以下の処理を実行します：

1. **ファイルスキャン**: domeフォルダ内の全HTMLファイルを検索
2. **フィルタリング**: `YYYYMM.html` 形式のファイルのみを抽出（recipes.htmlは除外）
3. **メタデータ抽出**: 各ファイルから以下を抽出
   - タイトル（`<title>` または `<h1>`）
   - 説明（最初の3つの `<h2>` タグ）
4. **ソート**: 日付順（新しい順）にソート
5. **HTML生成**: recipes.html を自動生成
6. **タイムスタンプ**: 最終更新日時を自動記録

## 💡 Tips

### 複数のレシピを一度に追加

複数のHTMLファイルを追加した後、スクリプトを1回実行するだけで全て反映されます。

```bash
# 3つのレシピを追加
202602.html
202603.html
202604.html

# 1回実行するだけ
node generate-recipes.js
```

### 既存のレシピを編集

既存のHTMLファイル（例: 202601.html）を編集した後、スクリプトを実行すれば、タイトルや説明が自動的に更新されます。

### レシピを削除

1. 該当するHTMLファイルを削除
2. スクリプトを実行
3. recipes.html から自動的に削除されます

## 🎯 今後の拡張

このシステムは以下のように拡張できます：

- タグやカテゴリーの追加
- 検索機能の実装
- 原価情報の自動集計
- JSON形式でのデータエクスポート

## 📞 サポート

問題が発生した場合は、以下を確認してください：

1. Node.js v14以上がインストールされているか
2. ファイル名が正しい形式か
3. HTMLファイルに必要なタグ（title, h1, h2）が含まれているか

---

**最終更新**: 2025年12月31日
